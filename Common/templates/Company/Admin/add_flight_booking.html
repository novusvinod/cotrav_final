{% extends 'Company/Admin//layout/header.html' %}

{% block content %}

{% if user %}
<!-- start page content -->

{% include 'cotrav_alert_message.html' %}

<div class="page-content-wrapper">
    <div class="page-content">
                                                  <div class="text-center">
                     <div style="font-size:14px; font-weight:bold;">
                        Add Flight Booking
                     </div></div>
        <form method="post" action="/Corporate/Admin/add-flight-booking/{{user.id}}">
            <input type="hidden" name="user_id" value="{{user.id}}">
            <input type="hidden" name="corporate_id" value="{{user.corporate_id}}">

             <input type="hidden" name="current_url" value="{{ request.get_full_path }}">
        <div class="row">

            <div class="col-sm-12">
							<div class="card card-box" style="margin:10px; margin-left:3%; margin-right:3%; ">
								<div class="card-head">
									<header>Booking Details: </header>
                                     <div class="tools">

										<a class="t-collapse btn-color fa fa-chevron-down" href="javascript:;"></a>

                                    </div>
								</div>
								<div class="card-body row">

                        <div class="col-lg-2 p-t-20">
										<div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
											<select name="usage_type" class="mdl-textfield__input js-select2">
                                                <option value="">Select Usage Type</option>
                                                <option value="Flight">Flight</option>
                                                <option value="Web Checkin">Web Checkin</option>
                                            </select>
                                         <label class = "mdl-textfield__label" >Usage Type*</label>
                                       </div>
									</div>

                         <div class="col-lg-2 p-t-20">
										<div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
											<select name="trip_type" class="mdl-textfield__input js-select2" required>
                                                  <option value="">Select Journey Type</option>
                                                  <option value="One Way">One Way</option>
                                                  <option value="Round Trip">Round Trip</option>
                                            </select>
                                         <label class = "mdl-textfield__label" >Journey Type*</label>
                                       </div>
									</div>


                          <div class="col-lg-2 p-t-20">
										<div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
											<select name="seat_type" class="mdl-textfield__input js-select2" required>
                                                  <option value="">Select Class</option>
                                                  <option value="Economy">Economy</option>
                                                  <option value="Premium Economy">Premium Economy</option>
                                                  <option value="Business">Business</option>
                                            </select>
                                         <label class = "mdl-textfield__label" >Select Class*</label>
                                       </div>
									</div>


                            <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
					                     <input class = "mdl-textfield__input" type = "text" name="from_city" id="pickup_location" placeholder="" required>
					                     <label class = "mdl-textfield__label">From City*</label>
					                  </div>
						            </div>


                          <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
					                     <input class = "mdl-textfield__input" type = "text" name="to_city" id="drop_location" placeholder="" required>
					                     <label class = "mdl-textfield__label">To City*</label>
					                  </div>
						            </div>

                           <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
					                     <input class = "mdl-textfield__input date" type = "text" name="departure_date" placeholder="" required>
					                     <label class = "mdl-textfield__label">Departure Date*</label>
					                  </div>
						            </div>

                          <div class="col-lg-2 p-t-20" id="tr_no_of_days">
						              <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty" >
					                     <input class = "mdl-textfield__input" type = "text" name="preferred_flight">
					                     <label class = "mdl-textfield__label">Preferred Flights</label>
					                  </div>
						            </div>


                          {% for corp_acces in corp_access %}
                                {% if corp_acces.has_assessment_codes == 1 %}

                          <div class="col-lg-2 p-t-20">
										<div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
											<select class="mdl-textfield__input select2" name="assessment_code" id="assessment_code">
                                                <option value="">Select Assessment Code</option>
                                                    {% for assessment in assessments %}
                                                    <option value="{{assessment.id}}">{{assessment.assessment_code}}</option>
                                                    {% endfor %}

                                            </select>
                                         <label class = "mdl-textfield__label" >Assessment Code*</label>
                                       </div>
									</div>



                                    <div class="col-lg-2 p-t-20">
										<div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
											<select class="mdl-textfield__input js-select2" name="assessment_city_id" id="assessment_city_id">
                                                <option value="">Select Assessment City</option>
                                                    {% for city in cities_ass %}
                                                        <option value="{{city.id}}">{{city.city_name}}</option>
                                                        {% endfor %}

                                            </select>
                                         <label class = "mdl-textfield__label" >Assessment City*</label>
                                       </div>
									</div>

                         {% endif %}
                              {% endfor %}


                               <div class="col-lg-2 p-t-20">
										<div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
											<select class="mdl-textfield__input js-select2" id="entity_id" name="entity_id" required>
                                                <option value="">Select Billing Entity </option>
                                                    {% for entity in entities %}
                                                        <option value="{{entity.id}}">{{entity.entity_name}}</option>
                                                    {% endfor %}

                                            </select>
                                         <label class = "mdl-textfield__label" >Select Billing Entity*</label>
                                       </div>
									</div>



                              <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
					                     <textarea class = "mdl-textfield__input" name="reason_booking"> </textarea>
					                     <label class = "mdl-textfield__label">Booking Reason/ Comment*</label>
					                  </div>
						            </div>




                        </div>




                     </div>




                     </div>



  <div class="col-sm-12">
							<div class="card card-box" style="margin:10px; margin-left:3%; margin-right:3%">
								<div class="card-head">
									<header>Passanger Details: </header>
                                     <div class="tools">

										<a class="t-collapse btn-color fa fa-chevron-down" href="javascript:;"></a>

                                    </div>
								</div> <!-- card-head class end -->

                                <div class="card-body row">
						            <div class="col-lg-6 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                <select id="spoc_id" name="spoc_id" class="mdl-textfield__input js-select2" placeholder="Select Spoc" required>
                                      <option value="">Select Spoc </option>
                                        {% for spoc in spocs %}
                                            <option value="{{spoc.id}},{{spoc.group_id}},{{spoc.subgroup_id}}">{{spoc.user_name}}</option>
                                        {% endfor %}
                                    </select>

                                      <label class = "mdl-textfield__label">Select Spoc </label>

					                  </div>
						            </div>

                                    <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">


                                          <select id="no_of_seatss" name="no_of_seats" class="form-control col-sm-10 no_of_seats myselect" required>
                                                <option value="1">1</option>
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5" style="display: none">5</option>
                                                <option value="6" style="display: none">6</option>
                                          </select>

                                      </div>
						            </div>

                                    <div class="form-group row" id="emp_row_1">

                                        <div class="col-lg-3 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                           <select name="employee_id_1" id="employee_id_1" class="mdl-textfield__input js-select2" placeholder="Select Employee">
                                               <option value=""></option>
                                                {% for employee in employees %}
                                                <option value="{{employee.id}}" emp_id="{{employee.employee_cid}}" emp_cnt="{{employee.employee_contact}}" emp_name="{{employee.employee_name}}" emp_email="{{employee.employee_email}}">{{employee.employee_name}}/{{employee.employee_contact}}</option>
                                                {% endfor %}
                                           </select>

                                          <label class = "mdl-textfield__label">Select Employee</label>

                                      </div>
						            </div>

                                        <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="emp_id_1" id="emp_id_1" class="mdl-textfield__input" placeholder="Employee Id">


                                      </div>
						            </div>

                                        <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="employee_name_1" id="employee_name_1" class="mdl-textfield__input" placeholder="Name">


                                      </div>
						            </div>

                                         <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="employee_contact_1" id="employee_contact_1" class="mdl-textfield__input" placeholder="Contact No">


                                      </div>
						            </div>

                                        <div class="col-lg-3 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="employee_email_1" id="employee_email_1" class="mdl-textfield__input" placeholder="Email">


                                      </div>
						            </div>




                                    </div>

                              <!-- second employee -->
                                    <div class="form-group row" id="emp_row_2">

                                        <div class="col-lg-3 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                           <select name="employee_id_2" id="employee_id_2" class="mdl-textfield__input js-select2" placeholder="Select Employee">
                                               <option value=""></option>
                                                {% for employee in employees %}
                                                <option value="{{employee.id}}" emp_id="{{employee.employee_cid}}" emp_cnt="{{employee.employee_contact}}" emp_name="{{employee.employee_name}}" emp_email="{{employee.employee_email}}">{{employee.employee_name}}/{{employee.employee_contact}}</option>
                                                {% endfor %}
                                           </select>

                                          <label class = "mdl-textfield__label">Select Employee</label>

                                      </div>
						            </div>

                                        <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="emp_id_2" id="emp_id_2" class="mdl-textfield__input" placeholder="Employee Id">


                                      </div>
						            </div>

                                        <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="employee_name_2" id="employee_name_2" class="mdl-textfield__input" placeholder="Name">


                                      </div>
						            </div>

                                         <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="employee_contact_2" id="employee_contact_2" class="mdl-textfield__input" placeholder="Contact No">


                                      </div>
						            </div>

                                        <div class="col-lg-3 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="employee_email_2" id="employee_email_2" class="mdl-textfield__input" placeholder="Email">


                                      </div>
						            </div>




                                    </div>

                              <!-- end -->

                                    <!-- third employee -->
                                    <div class="form-group row" id="emp_row_3">

                                        <div class="col-lg-3 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                           <select name="employee_id_3" id="employee_id_3" class="mdl-textfield__input js-select2" placeholder="Select Employee">
                                               <option value=""></option>
                                                {% for employee in employees %}
                                                <option value="{{employee.id}}" emp_id="{{employee.employee_cid}}" emp_cnt="{{employee.employee_contact}}" emp_name="{{employee.employee_name}}" emp_email="{{employee.employee_email}}">{{employee.employee_name}}/{{employee.employee_contact}}</option>
                                                {% endfor %}
                                           </select>

                                          <label class = "mdl-textfield__label">Select Employee</label>

                                      </div>
						            </div>

                                        <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="emp_id_3" id="emp_id_3" class="mdl-textfield__input" placeholder="Employee Id">


                                      </div>
						            </div>

                                        <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="employee_name_3" id="employee_name_3" class="mdl-textfield__input" placeholder="Name">


                                      </div>
						            </div>

                                         <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="employee_contact_3" id="employee_contact_3" class="mdl-textfield__input" placeholder="Contact No">


                                      </div>
						            </div>

                                        <div class="col-lg-3 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="employee_email_3" id="employee_email_3" class="mdl-textfield__input" placeholder="Email">


                                      </div>
						            </div>




                                    </div>

                              <!-- end -->



                                     <!-- fourth employee -->
                                    <div class="form-group row" id="emp_row_4">

                                        <div class="col-lg-3 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                           <select name="employee_id_4" id="employee_id_4" class="mdl-textfield__input js-select2" placeholder="Select Employee">
                                               <option value=""></option>
                                                {% for employee in employees %}
                                                <option value="{{employee.id}}" emp_id="{{employee.employee_cid}}" emp_cnt="{{employee.employee_contact}}" emp_name="{{employee.employee_name}}" emp_email="{{employee.employee_email}}">{{employee.employee_name}}/{{employee.employee_contact}}</option>
                                                {% endfor %}
                                           </select>

                                          <label class = "mdl-textfield__label">Select Employee</label>

                                      </div>
						            </div>

                                        <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="emp_id_4" id="emp_id_4" class="mdl-textfield__input" placeholder="Employee Id">


                                      </div>
						            </div>

                                        <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="employee_name_4" id="employee_name_4" class="mdl-textfield__input" placeholder="Name">


                                      </div>
						            </div>

                                         <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="employee_contact_4" id="employee_contact_4" class="mdl-textfield__input" placeholder="Contact No">


                                      </div>
						            </div>

                                        <div class="col-lg-3 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="employee_email_4" id="employee_email_4" class="mdl-textfield__input" placeholder="Email">


                                      </div>
						            </div>




                                    </div>

                              <!-- end -->


                            </div>
            </div>
            </div>

                 <div class="col-sm-12">
							<div class="card card-box" style="margin:10px; margin-left:3%; margin-right:3%">
								<div class="card-head">

                                     <div class="tools">

										<a class="t-collapse btn-color fa fa-chevron-down" href="javascript:;"></a>

                                    </div>
								</div> <!-- card-head class end -->

                     <div class="card-body row">



                     <div class="col-lg-12"  align="center">
							              	<button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" type="submit">
											  Submit
											</button>

                              <button class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent"  >
											  Cancel
											</button>
							            </div>




                     </div>



                 </div>




        </div><!-- row end -->

       </div>
        </form>
    </div></div>


<!-- end page content -->





{% else %}
    <p>Welcome, new user. Please log in.<a href="/login">Login</a> </p>
{% endif %}

<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCCstbhex4F6X2-AXz3B1sR1oRvxssE3sc&libraries=places"></script>

<script type="text/javascript">

    $(".js-select2").select2({
        theme: "material",
        width: 'resolve'
    });

    $(".select2-selection__arrow")
        .addClass("material-icons")
        .html("arrow_drop_down");

</script>

<script type="text/javascript">
$(document).ready(function() {
$('#emp_row_2').hide();
$('#emp_row_3').hide();
$('#emp_row_4').hide();
$('#emp_row_5').hide();
$('#emp_row_6').hide();
    var emp_len = $('#employee_id_1 > option').length;
       for (var i=emp_len;i<7;i++) {
       var valueToCompare = $("#no_of_seats option[value='"+i+"']").text();
            if(valueToCompare == i) {
                $("#no_of_seats option[value='"+i+"']").attr("disabled", "disabled");
            }
       }
});


$("#employee_id_1").change(function()
    {
    	$("#emp_id_1").val($(this).find("option:selected").attr("emp_id"));
    	$("#employee_name_1").val($(this).find("option:selected").attr("emp_name"));
    	$("#employee_contact_1").val($(this).find("option:selected").attr("emp_cnt"));
    	$("#employee_email_1").val($(this).find("option:selected").attr("emp_email"));
    });

$("#employee_id_2").change(function()
    {
    	$("#emp_id_2").val($(this).find("option:selected").attr("emp_id"));
    	$("#employee_name_2").val($(this).find("option:selected").attr("emp_name"));
    	$("#employee_contact_2").val($(this).find("option:selected").attr("emp_cnt"));
    	$("#employee_email_2").val($(this).find("option:selected").attr("emp_email"));
    });

$("#employee_id_3").change(function()
    {
    	$("#emp_id_3").val($(this).find("option:selected").attr("emp_id"));
    	$("#employee_name_3").val($(this).find("option:selected").attr("emp_name"));
    	$("#employee_contact_3").val($(this).find("option:selected").attr("emp_cnt"));
    	$("#employee_email_3").val($(this).find("option:selected").attr("emp_email"));
    });

$("#employee_id_4").change(function()
    {
    	$("#emp_id_4").val($(this).find("option:selected").attr("emp_id"));
    	$("#employee_name_4").val($(this).find("option:selected").attr("emp_name"));
    	$("#employee_contact_4").val($(this).find("option:selected").attr("emp_cnt"));
    	$("#employee_email_4").val($(this).find("option:selected").attr("emp_email"));
    });

$("#employee_id_5").change(function()
    {
    	$("#emp_id_5").val($(this).find("option:selected").attr("emp_id"));
    	$("#employee_name_5").val($(this).find("option:selected").attr("emp_name"));
    	$("#employee_contact_5").val($(this).find("option:selected").attr("emp_cnt"));
    	$("#employee_email_5").val($(this).find("option:selected").attr("emp_email"));
    });

    $("#employee_id_6").change(function()
    {
    	$("#emp_id_6").val($(this).find("option:selected").attr("emp_id"));
    	$("#employee_name_6").val($(this).find("option:selected").attr("emp_name"));
    	$("#employee_contact_6").val($(this).find("option:selected").attr("emp_cnt"));
    	$("#employee_email_6").val($(this).find("option:selected").attr("emp_email"));
    });



$(".no_of_seats").change(function()
    {

    	var no_of_seats = $(this).val();

    	if(no_of_seats > 0){
           for(i=1;i<=no_of_seats;i++)
            {
                $('#emp_row_'+i).show();
                $("#employee_id_"+i).attr('required',true);

            }
            var j = parseInt(no_of_seats) + 1;
			for(j=j; j<=6; j++)
			{
				$('#emp_row_'+j).hide();
				$("#employee_id_"+j).attr('required',false);

			}
    	}
    });


 var input = document.getElementById('pickup_location');
 var autocomplete = new google.maps.places.Autocomplete(input);

 var input = document.getElementById('drop_location');
 var autocomplete = new google.maps.places.Autocomplete(input);



</script>


{% endblock %}