{% extends 'Agent/layout/header.html' %}

{% block content %}

{% if user %}

<!-- start page content -->
{% include 'cotrav_alert_message.html' %}
 <div class="page-content-wrapper">
                <div class="page-content">
                 <div>
                 <div style="font-size:14px; font-weight:bold;" align="center">
                     Bus Booking Details
                     </div>
                   </div>


                    {% for booking in bookings %}

    <form method="post" action="/agents/assign-bus-booking/{{booking.id}}" enctype="multipart/form-data">
    <input type="hidden" name="booking_id" value="{{booking.id}}">
    <input type="hidden" id="corporate_id" value="{{booking.corporate_id}}">
    <input type="hidden" name="user_id" value="{{user.id}}">
    <input type="hidden" name="current_url" value="{{ request.get_full_path }}">
    <input type="hidden" name="checkin" id="checkin" value="{{ booking.checkin_datetime }}">
    <input type="hidden" name="checkout" id="checkout" value="{{ booking.checkout_datetime }}">
    <input type="hidden" name="tax_on_management_fee" id="tax_on_management_fee" value="0">
    <input type="hidden" name="tax_on_management_fee_percentage" id="tax_on_management_fee_percentage" value="0">
    <input type="hidden" name="management_fee_igst" id="management_fee_igst" value="0">
    <input type="hidden" name="management_fee_cgst" id="management_fee_cgst" value="0">
    <input type="hidden" name="management_fee_sgst" id="management_fee_sgst" value="0">
    <input type="hidden" name="management_fee_igst_rate" id="management_fee_igst_rate" value="0">
    <input type="hidden" name="management_fee_cgst_rate" id="management_fee_cgst_rate" value="0">
    <input type="hidden" name="management_fee_sgst_rate" id="management_fee_sgst_rate" value="0">

             <input type="hidden" name="igst_amount" id="igst_amount" value="0">
    <input type="hidden" name="cgst_amount" id="cgst_amount" value="0">
    <input type="hidden" name="sgst_amount" id="sgst_amount" value="0">


                     <div class="row">
						<div class="col-sm-12">
							<div class="card card-box" style="margin:10px; margin-left:3%; margin-right:3%; ">
								<div class="card-head">
									<header>Basic Details: </header>
                                     <div class="tools">

										<a class="t-collapse btn-color fa fa-chevron-down" href="javascript:;"></a>

                                    </div>
								</div>
								<div class="card-body row">
						            <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                     <input class = "mdl-textfield__input" type = "text" name="group_name"  id = "group_name" value="{{ booking.reference_no }}" readonly>
					                     <label class = "mdl-textfield__label">Reference No</label>
					                  </div>
						            </div>

						           <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                     <input class = "mdl-textfield__input" type = "text" id = "bus_type_priority_1_name" name="bus_type_priority_1_name" value="{{ booking.assign_bus_type_id }}" readonly>
					                     <label class = "mdl-textfield__label">Bus Priority 1</label>
					                  </div>
						            </div>
									<div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                     <input class = "mdl-textfield__input " type = "text" id = "booking_datetime" name="booking_datetime" value="{{ booking.booking_datetime }}" readonly>
					                     <label class = "mdl-textfield__label">Booking Date</label>
					                  </div>
						            </div>

                                    <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                     <input class = "mdl-textfield__input" type = "text" id = "pickup_location" name="pickup_location"  value="{{ booking.pickup_location }}" readonly>
					                     <label class = "mdl-textfield__label">Pickup Location</label>
					                  </div>
						            </div>

									<div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
                                          <input class = "mdl-textfield__input" type = "text" name="drop_location"  id = "pickup_datetime" value="{{ booking.drop_location }}" readonly>
					                     <label class = "mdl-textfield__label">Drop Location</label>
					                  </div>
						            </div>
                                    <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                     <input class = "mdl-textfield__input" type = "text" name="pickup_from_datetime"  id = "pickup_from_datetime" value="{{ booking.pickup_from_datetime }}" readonly>
					                     <label class = "mdl-textfield__label">Pickup From Date</label>
					                  </div>
						            </div>



                                    <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                     <input class = "mdl-textfield__input" type = "text" id = "pickup_to_datetime" name="pickup_to_datetime"  value="{{ booking.pickup_to_datetime }}" readonly>
					                     <label class = "mdl-textfield__label">Pickup To Date</label>
					                  </div>
						            </div>

                                    <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                     <input class = "mdl-textfield__input" type = "text" id = "no_of_seats" name="no_of_seats"  value="{{ booking.no_of_seats }}" readonly>
					                     <label class = "mdl-textfield__label">No Of Seats</label>
					                  </div>
						            </div>
                                    <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                     <input class = "mdl-textfield__input" type = "text" id = "reason_booking" name="reason_booking"  value="{{ booking.reason_booking }}" readonly>
					                     <label class = "mdl-textfield__label">Booking Reason</label>
					                  </div>
						            </div>
                                    <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                     <input class = "mdl-textfield__input" type = "text" id = "client_status" name="client_status"  value="{{ booking.client_status }}" readonly>
					                     <label class = "mdl-textfield__label">Client Status</label>
					                  </div>
						            </div>
                                    <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                     <input class = "mdl-textfield__input" type = "text" id = "cotrav_status" name="cotrav_status"  value="{{ booking.cotrav_status }}" readonly>
					                     <label class = "mdl-textfield__label">CoTrav Status</label>
					                  </div>
						            </div>
								</div>
							</div>
						</div>
					</div>



                  <div class="row">
						<div class="col-sm-12">
							<div class="card card-box" style="margin:10px; margin-left:3%; margin-right:3%">
								<div class="card-head">
									<header>Assigned Bus Details: </header>
                                     <div class="tools">

										<a class="t-collapse btn-color fa fa-chevron-down" href="javascript:;"></a>

                                    </div>
								</div>
								<div class="card-body row">
						            <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                     <input class = "mdl-textfield__input" type = "text" name="ticket_no">
					                     <label class = "mdl-textfield__label">Ticket No</label>
					                  </div>
						            </div>

						            <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                     <input class = "mdl-textfield__input" type = "text" name="pnr_no" >
					                     <label class = "mdl-textfield__label">PNR No</label>
					                  </div>
						            </div>

									 <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                     <input class = "mdl-textfield__input" type = "text" name="seat_no" >
					                     <label class = "mdl-textfield__label">Seat No</label>
					                  </div>
						            </div>

                                    <div class="col-lg-2 p-t-20">
										  <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
											 <select name="assign_bus_type_id" class="mdl-textfield__input js-select2" required>
												 <option value="">--Select Bus Type-- </option>
												 <option value="1" {% if booking.assign_bus_type_id == 'AC Seater'%} selected {% endif %}>AC Seater</option>
												  <option value="2" {% if booking.assign_bus_type_id == 'AC Sleeper'%} selected {% endif %}>AC Sleeper</option>
												  <option value="3" {% if booking.assign_bus_type_id == 'NON AC Seater'%} selected {% endif %}>NON AC Seater</option>
												  <option value="4" {% if booking.assign_bus_type_id == 'NON AC Sleeper'%} selected {% endif %}>NON AC Sleeper</option>
											</select>
										  <label class = "mdl-textfield__label" >Bus Type*</label>
										</div>
						            </div>

									 <div class="col-lg-2 p-t-20">
										  <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
											 <select name="operator_name" id="operator_id" class="mdl-textfield__input js-select2" required>
												<option value="">Select Operator Name</option>
													{% for operator in bus_operators %}
														<option value="{{operator.id}}" gst="{{operator.gst_id}}">{{operator.operator_name}} ({{operator.operator_contact}})</option>
													{% endfor %}

											</select>
										  <label class = "mdl-textfield__label" >Select Operator Name*</label>
										</div>
						            </div>

									 <div class="col-lg-2 p-t-20">
						               <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
											 <select name="portal_used" class="mdl-textfield__input js-select2" required>
												<option value="">Select Portal Used</option>
													{% for bus_port in bus_portal %}
														<option value="{{bus_port.id}}">{{bus_port.name}}</option>
													{% endfor %}
											</select>
										  <label class = "mdl-textfield__label" >Select Portal Used</label>
										</div>
						            </div>

									<div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width is-dirty">
					                     <input class = "mdl-textfield__input" type = "text" name="boarding_point">
					                     <label class = "mdl-textfield__label">Boarding Point</label>
					                  </div>
						            </div>

									<div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width is-dirty">
					                     <input class = "mdl-textfield__input datetimepicker1" type = "text" name="boarding_datetime">
					                     <label class = "mdl-textfield__label">Boarding Time</label>
					                  </div>
						            </div>

									 <div class="col-lg-2 p-t-20">
						               <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
											 <select name="is_client_sms" class="mdl-textfield__input js-select2">
												<option value="1">Yes</option>
                                    			<option value="0">No</option>
											</select>
										  <label class = "mdl-textfield__label" >Select Portal Used</label>
										</div>
						            </div>

									 <div class="col-lg-2 p-t-20">
						               <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
											 <select name="is_client_email" class="mdl-textfield__input js-select2">
												<option value="1">Yes</option>
                                    			<option value="0">No</option>
											</select>
										  <label class = "mdl-textfield__label" >Select Portal Used</label>
										</div>
						            </div>



								</div>
							</div>
						</div>
					</div>

		                  <div class="row">
						<div class="col-sm-12">
							<div class="card card-box" style="margin:10px; margin-left:3%; margin-right:3%">
								<div class="card-head">
									<header>Client Billing Details </header>
                                     <div class="tools">

										<a class="t-collapse btn-color fa fa-chevron-down" href="javascript:;"></a>

                                    </div>
								</div>
								<div class="card-body row">
						            <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width is-dirty">
					                     <input class = "mdl-textfield__input" type = "text" name="ticket_price" id="ticket_price">
					                     <label class = "mdl-textfield__label">Ticket Price</label>
					                  </div>
						            </div>

						            <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width is-dirty">
					                     <input class = "mdl-textfield__input" type = "text" name="management_fee" id="mng_fee" >
					                     <label class = "mdl-textfield__label">Management Fee</label>
					                  </div>
						            </div>
                                    <div class="col-lg-2 p-t-20">
										  <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
											 <input class = "mdl-textfield__input" type = "text" name="tax_mng_amt" id="tax_mng_amt" >
										  <label class = "mdl-textfield__label" >Tax amount management fee*</label>
										</div>
						            </div>

									 <div class="col-lg-2 p-t-20">
										  <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
											 <input class = "mdl-textfield__input" type = "text" name="sub_total" id="total_billing_amt" >
										  <label class = "mdl-textfield__label" >Total billing amount</label>
										</div>
						            </div>

									 <div class="col-lg-2 p-t-20">
						               <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
											 <select id="cotrav_billing_entity" name="cotrav_billing_entity" class="mdl-textfield__input js-select2" required>
												<option value="">Select Cotrav Billing Entity</option>
													 {% for c_enttity in c_entitys %}
														<option value="{{c_enttity.id}}" gst="{{c_enttity.gst_id}}">{{c_enttity.entity_name}} </option>
													{% endfor %}
											</select>
										  <label class = "mdl-textfield__label" >Select Cotrav Billing Entity</label>
										</div>
						            </div>

									<div class="col-lg-2 p-t-20">
						               <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
											 <input type="text" class="mdl-textfield__input" name="bb_entity" gst="{{be_gst}}" id="booking_billing_entity" value="{{be_name}}">
										  <label class = "mdl-textfield__label" >Booking Billing Entity</label>
										</div>
						            </div>


									<div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                     <input class = "mdl-textfield__input" name="cgst" id="cgst"  readonly>
					                     <label class = "mdl-textfield__label">CGST (perscentage)</label>
					                  </div>
						            </div>

									<div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                     <input class = "mdl-textfield__input" type = "text" name="sgst" id="sgst" readonly>

					                     <label class = "mdl-textfield__label">SGST (perscentage)</label>
					                  </div>
						            </div>

									 <div class="col-lg-2 p-t-20">
						               <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
											<input class = "mdl-textfield__input" type = "text" name="igst" id="igst"  readonly>
										  <label class = "mdl-textfield__label" >IGST (perscentage)</label>
										</div>
						            </div>

									  <div class="col-lg-2 p-t-20">
						               <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
											<input class = "mdl-textfield__input" type="checkbox" name="client_ticket" value="1" onchange="valueChanged()">

										   <label class = "mdl-textfield__label" >Generate System Ticket</label>
										</div>
						            </div>

									 <div class="col-lg-2 p-t-20">
						               <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
											<input type="file" class="mdl-textfield__input" name="busticketToUpload" id="bus-ticket">
										  <label class = "mdl-textfield__label" >Browse Ticket</label>
										</div>
						            </div>



								</div>
							</div>
						</div>
					</div>

<!--- operator billing details ---->

		<div class="row">
						<div class="col-sm-12">
							<div class="card card-box" style="margin:10px; margin-left:3%; margin-right:3%">
								<div class="card-head">
									<header>Operator Billing Details </header>
                                     <div class="tools">

										<a class="t-collapse btn-color fa fa-chevron-down" href="javascript:;"></a>

                                    </div>
								</div>
								<div class="card-body row">
						            <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width is-dirty">
					                     <input class = "mdl-textfield__input" type = "text" name="oper_ticket_price" id="oper_ticket_price" required>
					                     <label class = "mdl-textfield__label">Ticket Price</label>
					                  </div>
						            </div>

						            <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width is-dirty">
					                     <input class = "mdl-textfield__input" type = "text" name="operator_commission" id="operator_commission" required>
					                     <label class = "mdl-textfield__label">Commission</label>
					                  </div>
						            </div>
                                    <div class="col-lg-2 p-t-20">
										  <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
											  <select id="oper_commission_type" name="oper_commission_type" class="mdl-textfield__input js-select2" required>
												<option value="1">Percent</option>
												<option value="2">Fixed</option>
											</select>
										  <label class = "mdl-textfield__label" >Commission Type</label>
										</div>
						            </div>

									 <div class="col-lg-2 p-t-20">
						               <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
											 <select id="cotrav_billing_entity1" name="cotrav_billing_entity" class="mdl-textfield__input js-select2" required>
												<option value="">Select Select Cotrav Billing Entity</option>
													 {% for c_enttity in c_entitys %}
														<option value="{{c_enttity.id}}" gst="{{c_enttity.gst_id}}">{{c_enttity.entity_name}} </option>
													{% endfor %}
											</select>
										  <label class = "mdl-textfield__label" >Select Cotrav Billing Entity</label>
										</div>
						            </div>

									<div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width is-dirty">
					                     <input class = "mdl-textfield__input" name="oper_cgst" id="oper_cgst"  readonly>
					                     <label class = "mdl-textfield__label">CGST (perscentage)</label>
					                  </div>
						            </div>

									<div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width is-dirty">
					                     <input class = "mdl-textfield__input" type = "text" name="oper_sgst" id="oper_sgst"  readonly>

					                     <label class = "mdl-textfield__label">SGST (perscentage)</label>
					                  </div>
						            </div>

									 <div class="col-lg-2 p-t-20">
						               <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty is-dirty">
											<input class = "mdl-textfield__input" type = name="oper_igst" id="oper_igst"  readonly>
										  <label class = "mdl-textfield__label" >IGST (perscentage)</label>
										</div>
						            </div>


									 <div class="col-lg-2 p-t-20">
						               <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
											<input type="file" class="mdl-textfield__input" name="vendorticketToUpload" id="vendor-bus-ticket">
										  <label class = "mdl-textfield__label" >Browse Vendor Ticket</label>
										</div>
						            </div>



								</div>
							</div>
						</div>
					</div>

                      <div class="row">
						<div class="col-sm-12">
							<div class="card card-box" style="margin:10px; margin-left:3%; margin-right:3%">
								<div class="card-head">
									<header>SPOC Details: </header>
                                     <div class="tools">

										<a class="t-collapse btn-color fa fa-chevron-down" href="javascript:;"></a>

                                    </div>
								</div>
								<div class="card-body row">
						            <div class="col-lg-3 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                     <input class = "mdl-textfield__input" type = "text" name="user_name"  id = "user_name" value="{{ booking.user_name }}" readonly>
					                     <label class = "mdl-textfield__label">Spoc Name</label>
					                  </div>
						            </div>

						            <div class="col-lg-3 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                     <input class = "mdl-textfield__input" type = "text" id = "user_contact" name="user_contact" value="{{ booking.user_contact }}" readonly>
					                     <label class = "mdl-textfield__label">Contact Number</label>
					                  </div>
						            </div>
                                    <div class="col-lg-3 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                     <input class = "mdl-textfield__input" type = "text" id = "email" name="email"  value="{{ booking.email }}" readonly>
					                     <label class = "mdl-textfield__label">Email ID</label>
					                  </div>
						            </div>

								</div>
							</div>
						</div>
					</div>



					{% if booking.boarding_point  %}
                      <div class="row">
						<div class="col-sm-12">
							<div class="card card-box" style="margin:10px; margin-left:3%; margin-right:3%">
								<div class="card-head">
									<header>Boarding Details: </header>
                                     <div class="tools">

										<a class="t-collapse btn-color fa fa-chevron-down" href="javascript:;"></a>

                                    </div>
								</div>
								<div class="card-body row">
						            <div class="col-lg-3 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                     <input class = "mdl-textfield__input" type = "text" name="boarding_point"  id = "boarding_point" value="{{ booking.boarding_point }}" readonly>
					                     <label class = "mdl-textfield__label">Boarding Point</label>
					                  </div>
						            </div>

						            <div class="col-lg-3 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                     <input class = "mdl-textfield__input" type = "text" id = "boarding_datetime" name="boarding_datetime" value="{{ booking.boarding_datetime }}" readonly>
					                     <label class = "mdl-textfield__label">Boarding Datetime</label>
					                  </div>
						            </div>

								</div>
							</div>
						</div>
					</div>
					{% endif %}



					{% if booking.operator_name %}
                      <div class="row">
						<div class="col-sm-12">
							<div class="card card-box" style="margin:10px; margin-left:3%; margin-right:3%">
								<div class="card-head">
									<header>Operator Details: </header>
                                     <div class="tools">

										<a class="t-collapse btn-color fa fa-chevron-down" href="javascript:;"></a>

                                    </div>
								</div>
								<div class="card-body row">
						            <div class="col-lg-3 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                     <input class = "mdl-textfield__input" type = "text" name="operator_name"  id = "operator_name" value="{{ booking.operator_name }}" readonly>
					                     <label class = "mdl-textfield__label">Operator Name</label>
					                  </div>
						            </div>

						            <div class="col-lg-3 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                     <input class = "mdl-textfield__input" type = "text" id = "operator_contact" name="operator_contact" value="{{ booking.operator_contact }}" readonly>
					                     <label class = "mdl-textfield__label">Contact Number</label>
					                  </div>
						            </div>

								</div>
							</div>
						</div>
					</div>
					{% endif %}



					 <div class="row">
						<div class="col-sm-12">
							<div class="card card-box" style="margin:10px; margin-left:3%; margin-right:3%">
								<div class="card-head">
									<header>Passenger Details: </header>
                                     <div class="tools">

										<a class="t-collapse btn-color fa fa-chevron-down" href="javascript:;"></a>

                                    </div>
								</div>

								{% for passanger in booking.Passangers %}

								<div class="card-body row">
						            <div class="col-lg-3 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                     <input class = "mdl-textfield__input" type = "text" name="employee_name"  id = "employee_name" value="{{ passanger.employee_name }}" readonly>
					                     <label class = "mdl-textfield__label">Passenger Name</label>
					                  </div>
						            </div>

						            <div class="col-lg-3 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                     <input class = "mdl-textfield__input" type = "text" id = "employee_email" name="employee_email" value="{{ passanger.employee_email }}" readonly>
					                     <label class = "mdl-textfield__label">Email ID</label>
					                  </div>
						            </div>

									<div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                     <input class = "mdl-textfield__input" type = "text" id = "employee_contact" name="employee_contact" value="{{ passanger.employee_contact }}" readonly>
					                     <label class = "mdl-textfield__label">Contact Number</label>
					                  </div>
						            </div>

									<div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                     <input class = "mdl-textfield__input" type = "text" id = "age" name="age" value="{{ passanger.age }}" readonly>
					                     <label class = "mdl-textfield__label">Age</label>
					                  </div>
						            </div>

									<div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                     <input class = "mdl-textfield__input" type = "text" id = "gender" name="gender" value="{{ passanger.gender }}" readonly>
					                     <label class = "mdl-textfield__label">Gender</label>
					                  </div>
						            </div>




<!--							         <div class="col-lg-12 p-t-20 text-center">-->
<!--						              	<button type="button" class="mdl-button mdl-js-button mdl-button&#45;&#45;raised mdl-js-ripple-effect m-b-10 m-r-20 btn-pink">Submit</button>-->
<!--										<button type="button" class="mdl-button mdl-js-button mdl-button&#45;&#45;raised mdl-js-ripple-effect m-b-10 btn-default">Cancel</button>-->
<!--						            </div>-->
								</div>

								{% endfor %}

							</div>
						</div>
					</div>


                    {% endfor %}

					    <div class="row">
						<div class="col-sm-12">
							<div class="card card-box" style="margin:10px; margin-left:3%; margin-right:3%; margin-bottom: 5%">
								<div class="card-head">
									<header>Comment Details: </header>
                                     <div class="tools">

										<a class="t-collapse btn-color fa fa-chevron-down" href="javascript:;"></a>

                                    </div>
								</div>
								<div class="card-body row">
						             <div class="col-lg-12"  align="center">
							              	<button class="btn btn-info mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" type="submit">
											  Submit
											</button>

                              <button class="btn btn-danger mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent"  >
											  Cancel
											</button>
							            </div>






<!--							         <div class="col-lg-12 p-t-20 text-center">-->
<!--						              	<button type="button" class="mdl-button mdl-js-button mdl-button&#45;&#45;raised mdl-js-ripple-effect m-b-10 m-r-20 btn-pink">Submit</button>-->
<!--										<button type="button" class="mdl-button mdl-js-button mdl-button&#45;&#45;raised mdl-js-ripple-effect m-b-10 btn-default">Cancel</button>-->
<!--						            </div>-->
								</div>
							</div>
						</div>
					</div>






</form>
                </div>


            </div>
				<div>

				</div>





{% else %}
<p>Welcome, new user. Please log in.<a href="/login">Login</a></p>
{% endif %}

<script type="text/javascript">

$('#taxi_details').change(function(){
     var taxi_detail = $('#taxi_details option:selected').data('details');
    temp = taxi_detail.split(',');

    if(temp[0] != '' ){
        $("#taxi_reg_no").val(temp[0]);
        $("#garage_location").val(temp[1]);
        $("#garage_distance").val(temp[2]);
     }
     else{
        $("#taxi_reg_no").val('');
        $("#garage_location").val('');
        $("#garage_distance").val('');
     }
});
 </script>

<script type="text/javascript">
function valueChanged()
{

    if($('.client_ticket').is(":checked"))
        $("#client-tkt").hide();
    else
        $("#client-tkt").show();


}
</script>


<script>

        $( document ).ready(function() {

            var corporate_id =  $('#corporate_id').val();;

            var service_type = 1;

            var url = '{{ API_BASE_URL }}'+'get_corporate_management_fee'

    $.ajaxSetup({
            headers:{
                    'Authorization': "Token {{request.session.agent_access_token}}",
                    'usertype': {{request.session.login_type}}
                }
        });

        $.post( url,{ corporate_id: corporate_id , service_type: service_type },
      function(data)
      {
       //alert(JSON.stringify(data));
      var management_fee = data["Fees"][0].service_fees_type_value
      if(management_fee == ""){
      	management_fee = 100
      }else{
      	management_fee = 100
      }
      var no_of_passanger = $('#no_of_seats').val();
      $('#mng_fee').val(management_fee*no_of_passanger);
      $('#oper_mng_fee').val(management_fee);
       });



            $('#ticket_price').keyup(function(event){
                if(event.which != 8 && isNaN(String.fromCharCode(event.which))){
                        event.preventDefault(); //stop character from entering input
                }else{

                    var ticket_price = this.value;
                    var management_fee = $('#mng_fee').val();
                    var tax_perscent_on_management_fee = 18;
                    var tax_perscentage = 0.18
                    var tax_amount_on_management_fee = 0;
                    var total_billing_amount = 0;
                    var cgst = 0.0;
                    var sgst = 0.0;
                    var igst = 0.0;

                    if ($('#mng_fee').val() == "")
                    {
                        management_fee = 100
                        $('#mng_fee').val(management_fee);
                    }

                    tax_amount_on_management_fee =  management_fee * tax_perscentage ;

                    management_fee_with_tax =  parseFloat(management_fee) + parseFloat(tax_amount_on_management_fee);

                    total_billing_amount = parseFloat(ticket_price) + parseFloat(management_fee_with_tax)

                    $('#tax_mng_amt').val(tax_amount_on_management_fee);

                    $('#total_billing_amt').val(total_billing_amount);

                    val1 = $("#booking_billing_entity").attr("gst");
                    val2 = $('option:selected',"#cotrav_billing_entity").attr("gst");

                    console.log(val1);
                    console.log(val2);

                    //alert(val1);
                    //alert(val2);

                    match = val1.localeCompare(val2);

                    var v1 = val1.substring(0, 2);

                    var v2 = val2.substring(0, 2);

                    if(v1 == v2)
                    {
                       // alert("value matched");
                        cgst = 9;
                        sgst = 9;

                     $('#management_fee_cgst').val(cgst);
                        $('#management_fee_sgst').val(sgst);
                        var cgst_rate = tax_amount_on_management_fee/2;
                        $('#management_fee_cgst_rate').val(cgst_rate);
                        $('#management_fee_sgst_rate').val(cgst_rate);


                    }else{

                        igst = 18;

                        $('#management_fee_igst').val(igst);
                        $('#management_fee_igst_rate').val(tax_amount_on_management_fee);
                    }

                    $('#cgst').val(cgst);

                    $('#sgst').val(sgst);

                    $('#igst').val(igst);

                    $('#tax_on_management_fee').val(tax_amount_on_management_fee);

                    $('#tax_on_management_fee_percentage').val(tax_perscent_on_management_fee);

                }
            });


             $('#oper_ticket_price').keyup(function(event){
                if(event.which != 8 && isNaN(String.fromCharCode(event.which))){
                        event.preventDefault(); //stop character from entering input
                }else{

                  var oper_ticket_price = $('#oper_ticket_price').val();
                    var amount = parseFloat(oper_ticket_price) * 0.18;
                 var operator_gst_id = $('#operator_gst_id').val();

                  var operator_commission = $('#operator_commission').val();

                  var cgst_val = $('#oper_cgst').val();

                  var sgst_val = $('#oper_sgst').val();

                  var igst_val = $('#oper_igst').val();

                  var gst_tax = 0.0;

                   var val2 = $('option:selected',"#cotrav_billing_entity").attr("gst");
                  var val1 = $('option:selected',"#operator_id").attr("gst");

                  match = val1.localeCompare(val2);
                    var v1 = val1.substring(0, 2);
                    var v2 = val2.substring(0, 2);
                    if(v1 == v2)
                    {

                        $('#cgst_amount').val(amount/2);
                        $('#sgst_amount').val(amount/2);
                    }else{
                         $('#igst_amount').val(amount);
                    }

                  if(cgst_val == 0.0)
                  {
                    gst_tax = 0.18;
                  }
                  else{
                    gst_tax = 0.9;
                  }

                  var gst_paid =  parseFloat(oper_ticket_price) * parseFloat(gst_tax);

                  $('#gst_paid').val(gst_paid);

                }
            });


        });

$("#operator_id").change(function(){
var opr_gst = $('option:selected', this).attr('gst');
//alert(opr_gst);

var cgst = 0.0;
var sgst = 0.0;
var igst = 0.0;

 val1 = opr_gst ;
 val2 = $('option:selected',"#oper_cotrav_billing_entity").attr('gst');

    console.log(val1);
    console.log(val2);

    //alert(val1);
    //alert(val2);

    match = val1.localeCompare(val2);
    var v1 = val1.substring(0, 2);
    if(val2 == null){
    	var v2 = 0;
    }else{
    	var v2 = val2.substring(0, 2);
    }


     var oper_ticket_price = parseFloat($('#oper_ticket_price').val());
     var amount = parseFloat(oper_ticket_price) * 0.18;

    if(v1 == v2)
    {
       // alert("value matched");
        cgst = 9;
        sgst = 9;
       // alert(cgst);
       // alert(sgst);

       $('#cgst_amount').val(amount/2);
        $('#sgst_amount').val(amount/2);

    }else{

        igst = 18;

        $('#igst_amount').val(amount);

    }

     $('#oper_cgst').val(cgst);
     $('#oper_sgst').val(sgst);
     $('#oper_igst').val(igst);

});
</script>


 {% endblock %}