{% extends 'Agent/layout/header.html' %}

{% block content %}

{% if user.status %}

{% load static %}
<link href="{% static 'assets/css/select2_custome.css' %}" rel="stylesheet" type="text/css" />


			<!-- start page content -->
{% include 'cotrav_alert_message.html' %}
<div class="page-content-wrapper">
    <div class="page-content">

         <div class="text-center">
            <div style="font-size:14px; font-weight:bold;">
                Add New Hotel Booking Details
            </div>
   </div>

        <form method="post" action="/agents/add-hotel-booking/{{user.id}}" enctype="multipart/form-data">
      {% csrf_token %}
        <input type="hidden" class="col-sm-8 form-control" name="cotrav_agent_id"  value="{{user.id }}">
        <input type="hidden" class="col-sm-8 form-control" name="user_id"  value="{{user.id }}">
        <input type="hidden" name="current_url" value="{{ request.get_full_path }}">

       <div class="row">
						<div class="col-sm-12">
							<div class="card card-box" style="margin:10px; margin-left:3%; margin-right:3%; ">
								<div class="card-head">
									<header>Booking Details: </header>
                                     <div class="tools">

										<a class="t-collapse btn-color fa fa-chevron-down" href="javascript:;"></a>

                                    </div>
								</div>
								<div class="card-body row">

                               <div class="col-lg-2 p-t-20">
										<div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty" >
											<select class="mdl-textfield__input js-select2 " name="corporate_id" id="corporate_id" required >
												<option value="">--Select Company--</option>
                                               {% for company in companies %}
												<option value="{{company.id}}">{{company.corporate_name}}</option>
												{% endfor %}
                                            </select>
                                        <label class = "mdl-textfield__label" >Select Company</label>
                                       </div>
									</div>

                                    <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield  mdl-textfield--floating-label txt-full-width is-dirty">
										  <input class = "mdl-textfield__input" type = "file" name="email_attachment" >
										  <label class = "mdl-textfield__label" >Email Copy</label>
					                  </div>
						            </div>

                                    <div class="col-lg-2 p-t-20">
										<div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
											<select name="from_city" id="from_city" class="mdl-textfield__input js-select2" required>
                                                <option value="">--Select City--</option>
                                                 {% for city in cities %}
                                                <option value="{{city.id}}">{{city.city_name}}</option>
                                                 {% endfor %}
                                            </select>
                                         <label class = "mdl-textfield__label" >From City*</label>
                                       </div>
									</div>

                                    <div class="col-lg-2 p-t-20">
										<div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
											<select name="city_area" id="city_area" class="mdl-textfield__input js-select2" required>
                                                 <option value="">--Select City Area--</option>
                                                       {% for city in cities %}
                                                            <option value="{{city.id}}">{{city.city_name}}</option>
                                                        {% endfor %}
                                            </select>
                                         <label class = "mdl-textfield__label" >City/Area</label>
                                       </div>
									</div>

                                    <div class="col-lg-2 p-t-20" >
						              <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty" >
					                     <input class = "mdl-textfield__input" type = "text" name="preferred_hotel_area" id="preferred_hotel_area">
					                     <label class = "mdl-textfield__label">Preferred Hotel Area</label>
					                  </div>
						            </div>


                                    <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
					                     <input class = "mdl-textfield__input date-format" type = "text" name="check_in_date" required>
					                     <label class = "mdl-textfield__label">Check In DateTime*</label>
					                  </div>
						            </div>

                                    <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
					                     <input class = "mdl-textfield__input date-format" type = "text" name="check_out_date" required>
					                     <label class = "mdl-textfield__label">Check Out DateTime</label>
					                  </div>
						            </div>

                                    <div class="col-lg-2 p-t-20">
										<div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
											<select name="room_type_priority1" id="room_type_priority1" class="mdl-textfield__input js-select2" required>

                                            </select>
                                         <label class = "mdl-textfield__label" >Room type (Priority 1)</label>
                                       </div>
									</div>

                                    <div class="col-lg-2 p-t-20">
										<div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
											<select name="room_type_priority2" id="room_type_priority2" class="mdl-textfield__input js-select2" required>

                                            </select>
                                         <label class = "mdl-textfield__label" >Room type (Priority 2)</label>
                                       </div>
									</div>

                                    <div class="col-lg-2 p-t-20">
										<div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
											<select name="room_occupancy" id="room_occupancy" class="mdl-textfield__input js-select2" required>

                                            </select>
                                         <label class = "mdl-textfield__label" >Room Occupancy</label>
                                       </div>
									</div>

                                    <div class="col-lg-2 p-t-20" >
						              <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty" >
					                     <input class = "mdl-textfield__input" type = "text" name="preferred_hotel" >
					                     <label class = "mdl-textfield__label">Preferred Hotel</label>
					                  </div>
						            </div>

                                    <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
					                     <input class = "mdl-textfield__input date-format" type = "text" id="booking_datetime" name="booking_datetime" required>
					                     <label class = "mdl-textfield__label">Booking Date</label>
					                  </div>
						            </div>

                                     <div class="col-lg-2 p-t-20">
                                    <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
                                     <select name="assessment_code" id="assessment_code" class="mdl-textfield__input js-select2" required>
                                        <option value="">--Select Assessment Code--</option>
                                    </select>
                                  <label class = "mdl-textfield__label" >Assessment Code*</label>
                                </div>
                              </div>

                                    <div class="col-lg-2 p-t-20">
                                    <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
                                     <select name="assessment_city" id="assessment_cities" class="mdl-textfield__input js-select2" required>
                                        <option value="">--Select Assessment City--</option>
                                    </select>
                                  <label class = "mdl-textfield__label" >Assessment City*</label>
                                </div>
                              </div>

                                    <div class="col-lg-2 p-t-20">
                                    <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
                                     <select id="entity_id" name="entity_id" class="mdl-textfield__input js-select2" required>
                                           <option value="">--Select Billing Entity--</option>
                                    </select>
                                  <label class = "mdl-textfield__label" >Billing Entity*</label>
                                </div>
                              </div>


                               <div class="col-lg-2 p-t-20">
										<div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
											<select class="mdl-textfield__input js-select2 tour_type" name="is_sms">

                                                <option value="0">No</option>
												<option value="1">Yes</option>
                                            </select>
                                         <label class = "mdl-textfield__label" >Send SMS</label>
                                       </div>
									</div>

                         <div class="col-lg-2 p-t-20">
										<div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
											<select class="mdl-textfield__input js-select2 tour_type" name="is_email">

                                                <option value="0">No</option>
												<option value="1">Yes</option>
                                            </select>
                                         <label class = "mdl-textfield__label" >Send Email</label>
                                       </div>
									</div>


                         <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-textfield--floating-label txt-full-width is-dirty">
					                     <textarea class = "mdl-textfield__input" name="reason_booking"> </textarea>
					                     <label class = "mdl-textfield__label">Booking Reason/ Comment*</label>
					                  </div>
						            </div>


                                </div>
                            </div>
                        </div>


                                <div class="col-sm-12">
							<div class="card card-box" style="margin:10px; margin-left:3%; margin-right:3%">
								<div class="card-head">
									<header>Passanger Details: </header>
                                     <div class="tools">

										<a class="t-collapse btn-color fa fa-chevron-down" href="javascript:;"></a>

                                    </div>
								</div> <!-- card-head class end -->

                                <div class="card-body row">
						            <div class="col-lg-6 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
					                <select id="spoc_id" name="spoc_id" class="mdl-textfield__input js-select2" placeholder="Select Spoc" required>
                                      <option value="">--Select Spoc--</option>
                                    </select>

                                      <label class = "mdl-textfield__label">Select Spoc </label>

					                  </div>
						            </div>

                                    <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">
                                          <select id="no_of_seats" name="no_of_seats" class="mdl-textfield__input no_of_seats js-select2" placeholder="Select No Of Employye" required>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5" style="display: none">5</option>
                                    <option value="6" style="display: none">6</option>
                                </select>






                                      </div>
						            </div>

                                    <div class="form-group row" id="emp_row_1">

                                        <div class="col-lg-3 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                           <select name="employee_id_1" id="employee_id_1" class="mdl-textfield__input js-select2" placeholder="Select Employee">
                                               <option value="">--Select Employee--</option>
                                                {% for employee in employees %}
                                                <option value="{{employee.id}}" emp_id="{{employee.id}}">{{employee.employee_name}}/{{employee.employee_cid}}</option>
                                                {% endfor %}
                                           </select>

                                          <label class = "mdl-textfield__label">Select Employee</label>

                                      </div>
						            </div>

                                        <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="emp_id_1" id="emp_id_1" class="mdl-textfield__input" placeholder="Employee Id">


                                      </div>
						            </div>

                                        <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="employee_name_1" id="employee_name_1" class="mdl-textfield__input" placeholder="Name">


                                      </div>
						            </div>

                                         <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="employee_contact_1" id="employee_contact_1" class="mdl-textfield__input" placeholder="Contact No">


                                      </div>
						            </div>

                                        <div class="col-lg-3 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="employee_email_1" id="employee_email_1" class="mdl-textfield__input" placeholder="Email">


                                      </div>
						            </div>




                                    </div>

                              <!-- second employee -->
                                    <div class="form-group row" id="emp_row_2">

                                        <div class="col-lg-3 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                           <select name="employee_id_2" id="employee_id_2" class="mdl-textfield__input js-select2" placeholder="Select Employee">
                                               <option value="">--Select Employee--</option>
                                                {% for employee in employees %}
                                                <option value="{{employee.id}}" emp_id="{{employee.id}}">{{employee.employee_name}}/{{employee.employee_cid}}</option>
                                                {% endfor %}
                                           </select>

                                          <label class = "mdl-textfield__label">Select Employee</label>

                                      </div>
						            </div>

                                        <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="emp_id_2" id="emp_id_2" class="mdl-textfield__input" placeholder="Employee Id">


                                      </div>
						            </div>

                                        <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="employee_name_2" id="employee_name_2" class="mdl-textfield__input" placeholder="Name">


                                      </div>
						            </div>

                                         <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="employee_contact_2" id="employee_contact_2" class="mdl-textfield__input" placeholder="Contact No">


                                      </div>
						            </div>

                                        <div class="col-lg-3 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="employee_email_2" id="employee_email_2" class="mdl-textfield__input" placeholder="Email">


                                      </div>
						            </div>




                                    </div>

                              <!-- end -->

                                    <!-- third employee -->
                                    <div class="form-group row" id="emp_row_3">

                                        <div class="col-lg-3 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                           <select name="employee_id_3" id="employee_id_3" class="mdl-textfield__input js-select2" placeholder="Select Employee">
                                               <option value="">--Select Employee--</option>
                                                {% for employee in employees %}
                                                <option value="{{employee.id}}" emp_id="{{employee.id}}">{{employee.employee_name}}/{{employee.employee_cid}}</option>
                                                {% endfor %}
                                           </select>

                                          <label class = "mdl-textfield__label">Select Employee</label>

                                      </div>
						            </div>

                                        <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="emp_id_3" id="emp_id_3" class="mdl-textfield__input" placeholder="Employee Id">


                                      </div>
						            </div>

                                        <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="employee_name_3" id="employee_name_3" class="mdl-textfield__input" placeholder="Name">


                                      </div>
						            </div>

                                         <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="employee_contact_3" id="employee_contact_3" class="mdl-textfield__input" placeholder="Contact No">


                                      </div>
						            </div>

                                        <div class="col-lg-3 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="employee_email_3" id="employee_email_3" class="mdl-textfield__input" placeholder="Email">


                                      </div>
						            </div>




                                    </div>

                              <!-- end -->



                                     <!-- fourth employee -->
                                    <div class="form-group row" id="emp_row_4">

                                        <div class="col-lg-3 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                           <select name="employee_id_4" id="employee_id_4" class="mdl-textfield__input js-select2" placeholder="Select Employee">
                                               <option value="">--Select Employee--</option>
                                                {% for employee in employees %}
                                                <option value="{{employee.id}}" emp_id="{{employee.id}}">{{employee.employee_name}}/{{employee.employee_cid}}</option>
                                                {% endfor %}
                                           </select>

                                          <label class = "mdl-textfield__label">Select Employee</label>

                                      </div>
						            </div>

                                        <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="emp_id_4" id="emp_id_4" class="mdl-textfield__input" placeholder="Employee Id">


                                      </div>
						            </div>

                                        <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="employee_name_4" id="employee_name_4" class="mdl-textfield__input" placeholder="Name">


                                      </div>
						            </div>

                                         <div class="col-lg-2 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="employee_contact_4" id="employee_contact_4" class="mdl-textfield__input" placeholder="Contact No">


                                      </div>
						            </div>

                                        <div class="col-lg-3 p-t-20">
						              <div class = "mdl-textfield mdl-js-textfield mdl-textfield--floating-label txt-full-width">

                                          <input type="text" name="employee_email_4" id="employee_email_4" class="mdl-textfield__input" placeholder="Email">


                                      </div>
						            </div>




                                    </div>

                              <!-- end -->


                            </div>
            </div>
            </div>

                 <div class="col-sm-12">
							<div class="card card-box" style="margin:10px; margin-left:3%; margin-right:3%">
								<div class="card-head">

                                     <div class="tools">

										<a class="t-collapse btn-color fa fa-chevron-down" href="javascript:;"></a>

                                    </div>
								</div> <!-- card-head class end -->

                     <div class="card-body row">



                     <div class="col-lg-12"  align="center">
							              	<button class="btn btn-info mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" type="submit">
											  Submit
											</button>

                              <button class="btn btn-danger mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent"  >
											  Cancel
											</button>
							            </div>




                     </div>



                 </div>




        </div><!-- row end -->

       </div>
        </form>
    </div></div>


<!-- end page content -->




{% else %}
    <p>Welcome, new user. Please log in.<a href="/login">Login</a> </p>
{% endif %}

<script type="text/javascript">

    $(".js-select2").select2({
        theme: "material",
        width: 'resolve'
    });

    $(".select2-selection__arrow")
        .addClass("material-icons")
        .html("arrow_drop_down");

</script>

<script>
$(window).on("load", function () {
var_url = '/api/'+'cities'
    $.ajaxSetup({
            headers:{
                'Authorization': "Token {{request.session.agent_access_token}}",
                'usertype': 10
            }

        });

     $.post(var_url,{},
      function(data)
      {
       //alert(data['Cities']);
       if(data['Cities'].length != 0){
        entities = data['Cities'];
        $('#current_city_id').append($("<option value=''>Select Billing Entity</option>"));
         for (var i=0;i<entities.length;i++) {
            $('#from_city').append($("<option value='"+entities[i].id+"'>"+entities[i].city_name+"</option>"));
            $('#city_area').append($("<option value='"+entities[i].id+"'>"+entities[i].city_name+"</option>"));
         }
       }else{
        alert('No Entity Available')
       }
       });

});
$( document ).ready(function() {

    $('#emp_row_2').hide();
    $('#emp_row_3').hide();
    $('#emp_row_4').hide();
    $('#emp_row_5').hide();
    $('#emp_row_6').hide();

var today = moment().format('DD-MM-YYYY HH:mm:ss');
document.getElementById("booking_datetime").value = today;

});

$("#employee_id_1").change(function()
    {
    	$("#emp_id_1").val($(this).find("option:selected").attr("emp_id"));
    	$("#employee_name_1").val($(this).find("option:selected").attr("emp_name"));
    	$("#employee_contact_1").val($(this).find("option:selected").attr("emp_cnt"));
    	$("#employee_email_1").val($(this).find("option:selected").attr("emp_email"));
    });

$("#employee_id_2").change(function()
    {
    	$("#emp_id_2").val($(this).find("option:selected").attr("emp_id"));
    	$("#employee_name_2").val($(this).find("option:selected").attr("emp_name"));
    	$("#employee_contact_2").val($(this).find("option:selected").attr("emp_cnt"));
    	$("#employee_email_2").val($(this).find("option:selected").attr("emp_email"));
    });

$("#employee_id_3").change(function()
    {
    	$("#emp_id_3").val($(this).find("option:selected").attr("emp_id"));
    	$("#employee_name_3").val($(this).find("option:selected").attr("emp_name"));
    	$("#employee_contact_3").val($(this).find("option:selected").attr("emp_cnt"));
    	$("#employee_email_3").val($(this).find("option:selected").attr("emp_email"));
    });

$("#employee_id_4").change(function()
    {
    	$("#emp_id_4").val($(this).find("option:selected").attr("emp_id"));
    	$("#employee_name_4").val($(this).find("option:selected").attr("emp_name"));
    	$("#employee_contact_4").val($(this).find("option:selected").attr("emp_cnt"));
    	$("#employee_email_4").val($(this).find("option:selected").attr("emp_email"));
    });

$("#employee_id_5").change(function()
    {
    	$("#emp_id_5").val($(this).find("option:selected").attr("emp_id"));
    	$("#employee_name_5").val($(this).find("option:selected").attr("emp_name"));
    	$("#employee_contact_5").val($(this).find("option:selected").attr("emp_cnt"));
    	$("#employee_email_5").val($(this).find("option:selected").attr("emp_email"));
    });

    $("#employee_id_6").change(function()
    {
    	$("#emp_id_6").val($(this).find("option:selected").attr("emp_id"));
    	$("#employee_name_6").val($(this).find("option:selected").attr("emp_name"));
    	$("#employee_contact_6").val($(this).find("option:selected").attr("emp_cnt"));
    	$("#employee_email_6").val($(this).find("option:selected").attr("emp_email"));
    });

$(".no_of_seats").change(function()
    {

    	var no_of_seats = $(this).val();

    	if(no_of_seats > 0){
           for(i=1;i<=no_of_seats;i++)
            {
                $('#emp_row_'+i).show();
                $("#employee_id_"+i).attr('required',true);

            }
            var j = parseInt(no_of_seats) + 1;
			for(j=j; j<=6; j++)
			{
				$('#emp_row_'+j).hide();
				$("#employee_id_"+j).attr('required',false);

			}
    	}
    });


    $("#tour_type").change(function()
    {
    alert('ok')
    	var tour_type = $(this).val();

    	switch(tour_type){
           case '1':
              {
                $('#tr_taxi_type').hide();
                $('#tr_package').hide();
                $('#tr_no_of_days').hide();
                break;
              }
           case '2':
              {
                $('#tr_taxi_type').show();
                $('#tr_package').show();
                $('#tr_no_of_days').hide();
                break;
              }
           case '3':
              {
                $('#tr_taxi_type').show();
                $('#tr_package').show();
                $('#tr_no_of_days').show();
                break;
              }
        }


    });



    $("#corporate_id").change(function(){

      $('#city_id').empty();
      $('#taxi_type_id').empty();
      $('#spoc_id').empty();
      $('#entity_id').empty();
      $('#assessment_code').empty();
      $('#assessment_city_id').empty();
      $('#employee_id_1').empty();
      $('#employee_id_2').empty();
      $('#employee_id_3').empty();
      $('#employee_id_4').empty();
      $('#employee_id_5').empty();
      $('#employee_id_6').empty();
      $('#room_type_priority1').empty();
      $('#room_type_priority2').empty();
      $('#room_occupancy').empty();
    
    
    
       var corporate_id =  $(this).val();
       var_url = '/api/'+'billing_entities'
    
        $.ajaxSetup({
                headers:{
                    'Authorization': "Token {{request.session.agent_access_token}}",
                    'usertype': 10
                }
    
            });
    //   For Entity  
    
         $.post(var_url,{ corporate_id: corporate_id },
          function(data)
          {
           //alert(data['Entitys']);
           if(data['Entitys'].length != 0){
            entities = data['Entitys']
            $('#entity_id').append($("<option value=''>--Select Billing Entity--</option>"));
             for (var i=0;i<entities.length;i++) {
                $('#entity_id').append($("<option value='"+entities[i].id+"'>"+entities[i].entity_name+"</option>"));
             }
           }else{
           $('#entity_id').append($("<option value=''>--Select Billing Entity--</option>"));
            alert('No Entity Available')
           }
           });
    
    //       For SPOC    
    
    
        var_url_spoc = '/api/'+'spocs'
         $.post(var_url_spoc,{ corporate_id: corporate_id },
          function(data)
          {
           //alert(data['Spocs']);
           if(data['Spocs'].length != 0){
            spocs = data['Spocs']
            $('#spoc_id').append($("<option value=''>--Select Spoc--</option>"));
             for (var i=0;i<spocs.length;i++) {
                $('#spoc_id').append($("<option value='"+spocs[i].id+','+spocs[i].group_id+','+spocs[i].subgroup_id+" '>"+spocs[i].user_name+"</option>"));
    
             }
           }else{
           $('#spoc_id').append($("<option value=''>--Select Spoc--</option>"));
            alert('No SPOC Available')
           }
           });


      //       For Cities

        var_url_spoc = '/api/'+'assessment_cities'
         $.post(var_url_spoc,{ corporate_id: corporate_id },
          function(data)
          {
           if(data['Cities'].length != 0){
            package = data['Cities']
            $('#assessment_cities').append($("<option value=''>--Select Assessment City--</option>"));
             for (var i=0;i<package.length;i++) {
                $('#assessment_cities').append($("<option value='"+package[i].id+"'>"+package[i].city_name+"</option>"));
             }
           }else{
           $('#assessment_cities').append($("<option value=''>--Select Assessment City--</option>"));
            alert('No Assessment Cities Available')
           }
           });


             <!--        For assessment_codes    -->
    var_url_spoc = '/api/'+'assessment_codes'
     $.post(var_url_spoc,{ corporate_id: corporate_id },
      function(data)
      {

       if(data['Codes'].length != 0){
        package = data['Codes']
        $('#assessment_code').append($("<option value=''>--Select Assessment Code--</option>"));
         for (var i=0;i<package.length;i++) {
            $('#assessment_code').append($("<option value='"+package[i].id+"'>"+package[i].assessment_code+"</option>"));
         }
       }else{
       $('#assessment_code').append($("<option value=''>--Select Assessment Code--</option>"));
        alert('No Assessment Codes Available')
       }
       });

    <!--        For hotel_types    -->
    var_url_spoc = '/api/'+'hotel_types'
     $.post(var_url_spoc,{ corporate_id: corporate_id },
      function(data)
      {

       if(data['Types'].length != 0){
        package = data['Types']
        $('#room_occupancy').append($("<option value=''>--Select Room Occupancy--</option>"));
         for (var i=0;i<package.length;i++) {
            $('#room_occupancy').append($("<option value='"+package[i].id+"' occupancy='"+package[i].room_occupancy+"'>"+package[i].name+"</option>"));

         }
       }else{
       $('#room_occupancy').append($("<option value=''>--Select Room Occupancy--</option>"));
        alert('No Room Type Available')
       }
       });


    <!--        For room_types    -->
    var_url_spoc = '/api/'+'room_types'
     $.post(var_url_spoc,{ corporate_id: corporate_id },
      function(data)
      {

       if(data['Types'].length != 0){
        package = data['Types']
        $('#room_type_priority1').append($("<option value=''>--Select Room Type--</option>"));
        $('#room_type_priority2').append($("<option value=''>--Select Room Type--</option>"));
         for (var i=0;i<package.length;i++) {
            $('#room_type_priority1').append($("<option value='"+package[i].id+"'>"+package[i].name+"</option>"));
            $('#room_type_priority2').append($("<option value='"+package[i].id+"'>"+package[i].name+"</option>"));
         }
       }else{
        alert('No Room Type Available')
       }
       });

    });

$("#spoc_id").change(function(){
    var spoc_idd =  $(this).val();
    var spoc_id = spoc_idd.split(",");
      $('#employee_id_1').empty();
      $('#employee_id_2').empty();
      $('#employee_id_3').empty();
      $('#employee_id_4').empty();
      $('#employee_id_5').empty();
      $('#employee_id_6').empty();
    $.ajaxSetup({
            headers:{
                'Authorization': "Token {{request.session.agent_access_token}}",
                'usertype': {{request.session.login_type}}
            }

        });

        //       For Employees

    var_url_spoc_employee = '/api/'+'spoc_employee'
     $.post(var_url_spoc_employee,{ spoc_id: spoc_id[0] },
      function(data)
      {

       if(data['Employees'].length != 0){
        employee = data['Employees'];
        $('#employee_id_1').append($("<option value=''>--Select Employee--</option>"));
        $('#employee_id_2').append($("<option value=''>--Select Employee--</option>"));
        $('#employee_id_3').append($("<option value=''>--Select Employee--</option>"));
        $('#employee_id_4').append($("<option value=''>--Select Employee--</option>"));
        $('#employee_id_5').append($("<option value=''>--Select Employee--</option>"));
        $('#employee_id_6').append($("<option value=''>--Select Employee--</option>"));
         for (var i=0;i<employee.length;i++) {

            $('#employee_id_1').append($("<option value='"+employee[i].id+"' emp_id='"+employee[i].employee_cid+"' emp_cnt='"+employee[i].employee_contact+"' emp_name='"+employee[i].employee_name+"' emp_email='"+employee[i].employee_email+"' >"+employee[i].employee_name+"</option>"));
            $('#employee_id_2').append($("<option value='"+employee[i].id+"' emp_id='"+employee[i].employee_cid+"' emp_cnt='"+employee[i].employee_contact+"' emp_name='"+employee[i].employee_name+"' emp_email='"+employee[i].employee_email+"' >"+employee[i].employee_name+"</option>"));
            $('#employee_id_3').append($("<option value='"+employee[i].id+"' emp_id='"+employee[i].employee_cid+"' emp_cnt='"+employee[i].employee_contact+"' emp_name='"+employee[i].employee_name+"' emp_email='"+employee[i].employee_email+"' >"+employee[i].employee_name+"</option>"));
            $('#employee_id_4').append($("<option value='"+employee[i].id+"' emp_id='"+employee[i].employee_cid+"' emp_cnt='"+employee[i].employee_contact+"' emp_name='"+employee[i].employee_name+"' emp_email='"+employee[i].employee_email+"' >"+employee[i].employee_name+"</option>"));
            $('#employee_id_5').append($("<option value='"+employee[i].id+"' emp_id='"+employee[i].employee_cid+"' emp_cnt='"+employee[i].employee_contact+"' emp_name='"+employee[i].employee_name+"' emp_email='"+employee[i].employee_email+"' >"+employee[i].employee_name+"</option>"));
            $('#employee_id_6').append($("<option value='"+employee[i].id+"' emp_id='"+employee[i].employee_cid+"' emp_cnt='"+employee[i].employee_contact+"' emp_name='"+employee[i].employee_name+"' emp_email='"+employee[i].employee_email+"' >"+employee[i].employee_name+"</option>"));

         }

       var emp_len = data['Employees'].length;
       for (var i=emp_len+1;i<7;i++) {
       var valueToCompare = $(".no_of_seats option[value='"+i+"']").text();
            if(valueToCompare == i) {
                $(".no_of_seats option[value='"+i+"']").attr("disabled", "disabled");
            }
       }

       }else{
        alert('No Employees Available')
       }
       });

});

$("#room_occupancy").change(function(){
    $("#no_of_seats option[value='1']").attr("disabled", false);
    $("#no_of_seats option[value='2']").attr("disabled", false);
    $("#no_of_seats option[value='3']").attr("disabled", false);
    $("#no_of_seats option[value='4']").attr("disabled", false);
    $("#no_of_seats option[value='5']").attr("disabled", false);
    $("#no_of_seats option[value='6']").attr("disabled", false);
    var occupancy =  $(this).find("option:selected").attr("occupancy")
    var text = Number(occupancy) + 1;
    for (var i=text;i<7;i++) {
                $("#no_of_seats option[value='"+i+"']").attr("disabled", "disabled");
       }
});


</script>





{% endblock %}